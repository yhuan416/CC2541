BLE4.0 CC2541 DEVICE CODE
蓝牙4.0 cc2541 AT指令驱动

作者 : YHUAN

源文件 :
	cc2541.c
	cc2541.h

(测试环境为stm32F407zet6)

----------------------------------------------------------------------------------

VERSION 
	V1.0 第一个版本
	DATE : 2020/2/28
		测试/重启/设置模式功能
		获取/设置模块名字

-------------------------------------------------------------------------------------

使用前的配置:

在 cc2541.h 文件中配置相关的宏定义 
注意：记得添加相对应的头文件

	1.延时函数的配置
		#define CC2541_DELAY_MS		delay_ms
			毫秒级延时
		#define CC2541_DELAY_US		delay_us
			微秒级延时(当前版本未使用)

	2.超时设置
		#define CC2541_OUT_TIME		(500)
			定义等待回传数据的时间上限
		#define CC2541_TICKS		(10)
			定义等待期间每次延时的时长(ms)

	3.配置串口收发数据操作
		#define CC2541_RX_STA		(USART2_RX_STA&0x8000) 
			串口接收数据标志位
			当该标志位不为0时表示当前数据帧已接受完成
		#define CC2541_RX_BUF		USART2_RX_BUF
			串口数据保存空间首地址
			请在接受完一帧数据后自行在数据末尾添加结束符 '\0'
		#define CC2541_PRINTF		u2_printf
			串口输出(打印)函数
			需要实现printf相同的操作
		#define CC2541_RX_CFLAG()	{USART2_RX_STA=0;}
			清空接收数据标志位
			每次处理完数据会调用一次,确保调用完之后串口能够正常接收下一帧数据
	
	4.配置设备状态引脚
		#define CC2541_STATUS		PEin(6)
			CC2541 模块的status所连接的引脚
			该引脚高电平时，表示设备正在透传模式，反之则为AT指令模式
		
	5.配置DEBUG函数 (不是必须的)
		#define BLE_DEBUG			DEBUG
			如果定义了 __DEBUG 则会输出相关的调试数据

-----------------------------------------------------------------------------------------

函数的返回值
	enum BLE_RETURN{
		BLE_OK = 0,//配置成功
		BLE_TRANSMITTING,//设备正在透传模式
		BLE_TIMEOUT,//接收超时
		BLE_RESET_FAIL,//复位出错
		BLE_ERROR//配置出错
	};

-----------------------------------------------------------------------------------------
	
调用步骤
	1.在别的地方初始化好你的串口
	2.初始化好STATUS引脚(可以自行修改cc2541_init()函数,也可以调用别的函数)
	3.调用相关的设置/查询函数进行模块的设置
